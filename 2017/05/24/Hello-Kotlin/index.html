<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"deemonser.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="前言今年 Google I&#x2F;O 大会上，Google 宣布，将 Kotlin 语言作为安卓开发的一级编程语言，这消息火遍整个 Android 开发圈。不过，有些开发者似乎过度解读 Google 的意图，认为 Kotlin 要取代 Java 成为 Android 开发的标配？">
<meta property="og:type" content="article">
<meta property="og:title" content="Hello Kotlin">
<meta property="og:url" content="https://deemonser.github.io/2017/05/24/Hello-Kotlin/index.html">
<meta property="og:site_name" content="Deemons&#39;s Blog">
<meta property="og:description" content="前言今年 Google I&#x2F;O 大会上，Google 宣布，将 Kotlin 语言作为安卓开发的一级编程语言，这消息火遍整个 Android 开发圈。不过，有些开发者似乎过度解读 Google 的意图，认为 Kotlin 要取代 Java 成为 Android 开发的标配？">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g2gbe2b63pj30jg0czmyb.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tNc79gy1g2gbe38ma6j30i205ldfy.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tNc79gy1g2gbe3s3evj315c0k5gpq.jpg">
<meta property="og:image" content="https://cdn.kymjs.com/kotlin/6-1-1.png">
<meta property="article:published_time" content="2017-05-24T09:37:58.000Z">
<meta property="article:modified_time" content="2021-09-14T09:07:30.000Z">
<meta property="article:author" content="Deemons">
<meta property="article:tag" content="kotlin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ws1.sinaimg.cn/large/006tNc79gy1g2gbe2b63pj30jg0czmyb.jpg">

<link rel="canonical" href="https://deemonser.github.io/2017/05/24/Hello-Kotlin/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Hello Kotlin | Deemons's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Deemons's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://deemonser.github.io/2017/05/24/Hello-Kotlin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/my_icon.jpeg">
      <meta itemprop="name" content="Deemons">
      <meta itemprop="description" content="不积小流，无以成江海。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deemons's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hello Kotlin
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-24 17:37:58" itemprop="dateCreated datePublished" datetime="2017-05-24T17:37:58+08:00">2017-05-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-09-14 17:07:30" itemprop="dateModified" datetime="2021-09-14T17:07:30+08:00">2021-09-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Kotlin%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">Kotlin学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1g2gbe2b63pj30jg0czmyb.jpg" alt="Google I/O"></p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>今年 Google I/O 大会上，<strong>Google 宣布，将 Kotlin 语言作为安卓开发的一级编程语言，</strong>这消息火遍整个 Android 开发圈。不过，有些开发者似乎过度解读 Google 的意图，认为 Kotlin 要取代 Java 成为 Android 开发的标配？</p>
<span id="more"></span>

<p>从 Kotlin 官方博文中我们可以看到这么一句话：Today, at the Google I/O keynote, the Android team announced first-class support for Kotlin. 部分人产生误解是因为first-class support，这句话意思其实是提供一级支持的意思，跟 JS 中常说的函数是一等公民是一个意思，但我们知道一等公民并不止一个，<strong>Android 的一级编程语言还包括 java 、C++。</strong></p>
<p>所以 Google 会把 Android framework 层用Kotlin 再写一遍这事儿可能性很小。</p>
<br>

<br>

<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Kotlin 是运行在 JVM 上的一门静态类型语言，它是圣彼得堡的一个小岛的名字命名的，作者是大名鼎鼎的 **Jetbrains **公司。</p>
<p>Jetbrains 有一系列耳熟能详的产品，诸如 Android Studio, IntelliJ IDEA, 还有前端的WebStorm, PhpStorm（在这些工具上使用 Kotlin 非常简单，只需要按装 Kotlin 插件）。</p>
<ul>
<li>2011年7月，JetBrains 推出 Kotlin 项目。</li>
<li>2012年2月，JetBrains 以 Apache 2 许可证开源此项目。</li>
<li>2016年2月15日，Kotlin v1.0（第一个官方稳定版本）发布。</li>
<li>2017 Google I/O 大会，Kotlin 转正。</li>
</ul>
<p>从 <a target="_blank" rel="noopener" href="https://www.kotlincn.net/">Kotlin 官网 中文版</a> 介绍来看，这近乎是一门野心勃勃的语言。</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1g2gbe38ma6j30i205ldfy.jpg" alt="img"></p>
<ul>
<li>基于 JVM 编程，这意味着 Kotlin 可以写服务器代码；</li>
<li>基于 Android 和 Browser 编程，这意味着不仅可以写客户端编程，连前端开发都可以；</li>
<li>基于 Native 编程，直接绕过 JVM 与底层代码打交道，好彪悍；</li>
</ul>
<p>不过 Kotlin-Native 项目还在开发阶段，不知道最终推出的项目如何，还是蛮期待的，感兴趣的朋友可以关注它的 <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin-native">Github 更新</a></p>
<br>

<h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><h4 id="1-语法简单，不啰嗦"><a href="#1-语法简单，不啰嗦" class="headerlink" title="1. 语法简单，不啰嗦"></a>1. 语法简单，不啰嗦</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> currentVersionCode = <span class="number">1</span>  <span class="comment">//变量当前的版本号，类型Int可以根据值推断出来</span></span><br><span class="line"><span class="keyword">var</span> currentVersionName: String = <span class="string">&quot;1.0&quot;</span>  <span class="comment">//显式标明类型</span></span><br><span class="line"><span class="keyword">val</span> BASEURL = <span class="string">&quot;https://deemonser.github.io/&quot;</span>    <span class="comment">//BASEURL 类型(String)可以根据值推断出来</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//methods</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ma</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    println(args)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// class</span></span><br><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> : <span class="type">Person</span></span>() &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// data class  自动生成getter，setting，hashcode和equals等方法</span></span><br><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span></span>(<span class="keyword">var</span> name: String, <span class="keyword">val</span> price: <span class="built_in">Float</span>, <span class="keyword">var</span> author: String)</span><br><span class="line"></span><br><span class="line"><span class="comment">//支持默认参数值，减少方法重载</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">show</span><span class="params">(name: <span class="type">String</span>, age: <span class="type">Int</span> = <span class="number">18</span>, address: <span class="type">String</span> = <span class="string">&quot;深圳市&quot;</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Kotlin 支持类型推断，没有 Java 那样的啰嗦。</li>
<li>另外用 var 表示变量，val 表示常量更加的简洁</li>
<li>方法也很简单，连 function 都缩写成了 fun。</li>
<li>类的继承和实现很简单，使用:即可</li>
<li>Kotlin 每个句子都不需要加分号 (;)</li>
</ul>
<br>

<h4 id="2-空指针安全"><a href="#2-空指针安全" class="headerlink" title="2. 空指针安全"></a>2. 空指针安全</h4><p>空指针（NullPointerException 或 NPE）是我们使用 Java 开发程序中最常见的崩溃了。因为在 Java 中我们不得不写很多防御性的代码，比如这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(String string)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (string != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">char</span>[] chars = string.toCharArray();</span><br><span class="line">        <span class="keyword">if</span> (chars.length &gt; <span class="number">10</span>) &#123;</span><br><span class="line">            System.out.println(((Character)chars[<span class="number">10</span>]).hashCode());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 Kotlin 中空指针异常得到了很好的解决。</p>
<ul>
<li>在类型上的处理，即在类型后面加上?，即表示这个变量或参数以及返回值可以为 null，否则不允许为变量参数赋值为 null 或者返回 null</li>
<li>对于一个可能是 null 的变量或者参数，在调用对象方法或者属性之前，需要加上?，否则编译无法通过。</li>
</ul>
<p>如下面的代码就是 Kotlin 实现空指针安全的一个例子，而且相对 Java 实现而言，简直是一行代码搞定的。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">testNullSafeOperator</span><span class="params">(string: <span class="type">String</span>?)</span></span> &#123;</span><br><span class="line">    System.<span class="keyword">out</span>.println(string?.toCharArray()?.getOrNull(<span class="number">10</span>)?.hashCode())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    testNullSafeOperator(<span class="literal">null</span>)	<span class="comment">//null</span></span><br><span class="line">    testNullSafeOperator(<span class="string">&quot;12345678901&quot;</span>)	<span class="comment">//49</span></span><br><span class="line">    testNullSafeOperator(<span class="string">&quot;123&quot;</span>)	<span class="comment">// null</span></span><br></pre></td></tr></table></figure>



<p>关于空指针安全的原理，可以参考这篇文章<a target="_blank" rel="noopener" href="http://droidyue.com/newtab.html?url=http://droidyue.com/blog/2017/05/08/how-to-study-kotlin/">研究学习 Kotlin 的一些方法</a>。</p>
<br>

<h4 id="3-支持方法扩展"><a href="#3-支持方法扩展" class="headerlink" title="3. 支持方法扩展"></a>3. 支持方法扩展</h4><p>很多时候，Framework 提供给我们的 API 往往都时比较原子的，调用时需要我们进行组合处理，因为就会产生了一些 Util 类，一个简单的例子，我们想要更快捷的展示 Toast 信息，在 Java 中我们可以这样做。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">toast</span><span class="params">(Context context, String msg)</span> </span>&#123;</span><br><span class="line">    Toast.makeText(context,msg,Toast.LENGTH_LONG).show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是 Kotlin 的实现却让人惊奇，我们只需要重写扩展方法就可以了，比如这个 longToast 方法扩展到所有的 Context 对象中，如果不去追根溯源，可能无法区分是 Framework 提供的还是自行扩展的。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> Activity.<span class="title">toast</span><span class="params">(string: <span class="type">String</span>, duration: <span class="type">Int</span> = Toast.LENGTH_LONG)</span></span> &#123;</span><br><span class="line">    Toast.makeText(<span class="keyword">this</span>, <span class="string">&quot;hehe&quot;</span>, Toast.LENGTH_LONG).show()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：Kotlin 的方法扩展并不是真正修改了对应的类文件，而是在编译器和 IDE 方面做得处理。使我们看起来像是扩展了方法。</p>
<br>

<h4 id="4-Lambda-高阶函数，Streams-API-函数式编程支持"><a href="#4-Lambda-高阶函数，Streams-API-函数式编程支持" class="headerlink" title="4. Lambda, 高阶函数，Streams API, 函数式编程支持"></a>4. Lambda, 高阶函数，Streams API, 函数式编程支持</h4><p>所谓的 Lambda 表达式是匿名函数，这使得我们的代码会更加的简单。比如下面的代码就是 lambda 的应用。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">findViewById(R.id.text).setOnClickListener &#123;</span><br><span class="line">    Log.d(<span class="string">&quot;MainActivity&quot;</span>, <span class="string">&quot;<span class="variable">$it</span> was clicked&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所谓的高阶函数就是：  </p>
<ul>
<li>可以接受函数作为参数</li>
<li>也可以返回函数作为结果</li>
</ul>
<p>举一个接受函数作为参数的例子。在 Android 开发中，我们经常使用 SharedPreference 来存储数据，如果忘记调用 apply 或者 commit 则数据修改不能应用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PreferenceManager.getDefaultSharedPreferences(<span class="keyword">this</span>)</span><br><span class="line">        .edit()</span><br><span class="line">        .putString(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;abc&quot;</span>)</span><br><span class="line">        .apply();</span><br></pre></td></tr></table></figure>

<p>利用 Kotlin 中的高阶函数的功能，我们能更好的解决这个问题。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">fun</span> SharedPreferences.<span class="title">editor</span><span class="params">(f: (<span class="type">SharedPreferences</span>.<span class="type">Editor</span>) -&gt; <span class="type">Unit</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> editor = edit()</span><br><span class="line">        f(editor)</span><br><span class="line">        editor.apply()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line">PreferenceManager.getDefaultSharedPreferences(<span class="keyword">this</span>).editor &#123; it.putString(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;abc&quot;</span>) &#125;</span><br></pre></td></tr></table></figure>

<p>当然这上面的例子中我们也同时使用了方法扩展这个特性。</p>
<br>

<p>Kotlin 支持了 Streams API 和方法引用，这样函数式编程更加方便。比如下面的代码就是我们结合 Jsoup，来抓取某个 proxy 网站的数据，代码更加简单，实现起来也快速。</p>
<p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1g2gbe3s3evj315c0k5gpq.jpg" alt="屏幕快照 2017-05-18 下午 3.49.30.png"></p>
<br>

<h4 id="5-字符串模板"><a href="#5-字符串模板" class="headerlink" title="5. 字符串模板"></a>5. 字符串模板</h4><p>无论是 Java 还是 Android 开发，我们都会用到字符串拼接，比如进行日志输出等等。在 Kotlin 中，字符串模板是支持的，我们可以很轻松的完成一个字符串数组的组成：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> book = Book(<span class="string">&quot;Effective Java&quot;</span>, <span class="number">52f</span>, <span class="string">&quot;Effective Java Second Edition&quot;</span>)</span><br><span class="line">println(<span class="string">&quot;<span class="subst">$&#123;book.name&#125;</span> is very good! It&#x27;s only ￥<span class="subst">$&#123;book.price&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>注意：关于字符串拼接可以参考这篇文章 <a target="_blank" rel="noopener" href="http://droidyue.com/newtab.html?url=http://droidyue.com/blog/2014/08/30/java-details-string-concatenation/">Java 细节：字符串的拼接</a>。</p>
<br>

<br>

<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><h4 id="声明类型"><a href="#声明类型" class="headerlink" title="声明类型"></a>声明类型</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age: <span class="built_in">Int</span> = <span class="number">18</span> 				<span class="comment">//可简写成 var age = 18</span></span><br><span class="line"><span class="keyword">val</span> name: String = <span class="string">&quot;Deemons&quot;</span>	<span class="comment">//可简写成 val name = &quot;Deemons&quot;</span></span><br></pre></td></tr></table></figure>

<p>在Kotlin中变量声明有两种类型，</p>
<ol>
<li><strong>var</strong> 声明变量， var age: Int= “”中，age是变量名，：Int,表明该变量是Int类型变量，后面就是赋值语句。我们也可以这样写var str= “”省略了声明变量类型，它可以根据赋的值而自动推断出类型。</li>
<li><strong>val</strong>  声明常量，赋值后不能修改。</li>
</ol>
<br>

<h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到函数声明 fun ，函数名称 sum ，参数是两个 Int 类型的变量 a，b，返回值是 Int 类型。</p>
<p>这种仅有一句表达式的函数，可以将表达式作为函数体、返回值类型自动推断进行简写：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = a + b</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> = a + b	<span class="comment">//如果方法是一个public的，则必须明确写出返回类型</span></span><br></pre></td></tr></table></figure>

<p>如果函数无返回值</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printSum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Unit</span> &#123;</span><br><span class="line">    println(<span class="string">&quot;sum of <span class="variable">$a</span> and <span class="variable">$b</span> is <span class="subst">$&#123;a + b&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Unit</code> 返回类型可以省略：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printSum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    println(<span class="string">&quot;sum of <span class="variable">$a</span> and <span class="variable">$b</span> is <span class="subst">$&#123;a + b&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="区间"><a href="#区间" class="headerlink" title="区间"></a>区间</h4><p>区间表达式由具有操作符形式 <code>..</code> 的 <code>rangeTo</code> 函数辅以 <em>in</em> 和 <em>!in</em> 形成。 区间是为任何可比较类型定义的，但对于整型原生类型，它有一个优化的实现。以下是使用区间的一些示例</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span>) &#123; <span class="comment">// 等同于 1 &lt;= i &amp;&amp; i &lt;= 10</span></span><br><span class="line">    println(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.4</span>) print(i) <span class="comment">// 输出“1234”</span></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">4.</span><span class="number">.1</span>) print(i) <span class="comment">// 什么都不输出</span></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">4</span> downTo <span class="number">1</span>) print(i) <span class="comment">// 输出“4321”</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.4</span> step <span class="number">2</span>) print(i) <span class="comment">// 输出“13”</span></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">4</span> downTo <span class="number">1</span> step <span class="number">2</span>) print(i) <span class="comment">// 输出“42”</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span> until <span class="number">10</span>) &#123;   <span class="comment">// i in [1, 10) 排除了 10</span></span><br><span class="line">     println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h4><p>Kotlin 区分可变集合和不可变集合</p>
<p><img src="https://cdn.kymjs.com/kotlin/6-1-1.png" alt="kotlin 集合接口"></p>
<ul>
<li>不可变集合：<code>List&lt;out T&gt;</code> 类型是一个提供只读操作如 <code>size</code>、<code>get</code>等的接口。和 Java 类似，它继承自<code>Collection&lt;T&gt;</code> 进而继承自 <code>Iterable&lt;T&gt;</code>。（lists、sets、maps 等）</li>
<li>可变集合：<code>MutableCollection&lt;E&gt;</code> 类型是一个提供写操作如<code>add</code>、<code>remove</code>等的接口。开头是 <code>MutableXXX</code> 那就是一个跟 Java 中用法一致的集合类。（mutableList、mutableSet、mutableMap等）</li>
</ul>
<br>

<p>Kotlin 没有专门的语法结构创建 list 或 set。 要用标准库的方法，如 <code>listOf()</code>、 <code>mutableListOf()</code>、<code>setOf()</code>、 <code>mutableSetOf()</code>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> mutableList = mutableListOf(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> list = listOf(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>)	<span class="comment">//创建一个 ArrayList&lt;&gt; 对象</span></span><br><span class="line"><span class="keyword">val</span> ss = setOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>)	<span class="comment">//创建一个 Set&lt;&gt; 对象</span></span><br><span class="line"><span class="keyword">val</span> map = mapOf(<span class="string">&#x27;a&#x27;</span> to <span class="string">&quot;apple&quot;</span>, <span class="string">&#x27;b&#x27;</span> to <span class="string">&quot;build&quot;</span>) <span class="comment">//创建 一个 linkedMap&lt;&gt; 对象</span></span><br></pre></td></tr></table></figure>

<p>有一点需要知道的是，这些方法的返回值实际上返回的是 Java 的集合对象，目前只支持返回这些对象：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java.util.ArrayList</span><br><span class="line">java.util.LinkedHashMap</span><br><span class="line">java.util.HashMap</span><br><span class="line">java.util.LinkedHashSet</span><br><span class="line">java.util.HashSet</span><br><span class="line">java.util.SortedSet</span><br><span class="line">java.util.TreeSet</span><br></pre></td></tr></table></figure>

<p>这些类型是<a target="_blank" rel="noopener" href="https://www.kotlincn.net/docs/reference/generics.html#%E5%9E%8B%E5%8F%98">协变的</a>。这意味着，你可以把一个 <code>List&lt;Dog&gt;</code> 赋值给 <code>List&lt;Animal&gt;</code>。但对于可变集合类型这是不允许的。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> animal: List&lt;Animal&gt; = listOf&lt;Dog&gt;(Dog()) <span class="comment">//协变</span></span><br><span class="line"><span class="keyword">val</span> animal: MutableList&lt;Animal&gt; = mutableListOf&lt;Dog&gt;(Dog())	<span class="comment">//编译报错</span></span><br><span class="line"><span class="keyword">val</span> animal: MutableList&lt;Animal&gt; = mutableListOf&lt;Animal&gt;(Dog()) <span class="comment">//编译通过</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> list: List&lt;String&gt; = mutableListOf(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>)	<span class="comment">// 可变集合 赋值给 不可变集合 </span></span><br><span class="line"><span class="keyword">val</span> list: MutableList&lt;String&gt; = listOf&lt;String&gt;(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>)	<span class="comment">//编译报错</span></span><br></pre></td></tr></table></figure>

<br>

<h4 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h4><ol>
<li><p>if表达式</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传统用法</span></span><br><span class="line"><span class="keyword">var</span> max = a </span><br><span class="line"><span class="keyword">if</span> (a &lt; b) max = b</span><br><span class="line"></span><br><span class="line"><span class="comment">// With else </span></span><br><span class="line"><span class="keyword">var</span> max: <span class="built_in">Int</span></span><br><span class="line"><span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">    max = a</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    max = b</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 作为表达式 ,kotlin 中没有三目运算符</span></span><br><span class="line"><span class="keyword">val</span> max = <span class="keyword">if</span> (a &gt; b) a <span class="keyword">else</span> b </span><br><span class="line"></span><br><span class="line"><span class="comment">//if的分支可以是代码块，最后的表达式作为该块的值</span></span><br><span class="line"><span class="keyword">val</span> max = <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">    print(<span class="string">&quot;Choose a&quot;</span>)</span><br><span class="line">    a</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    print(<span class="string">&quot;Choose b&quot;</span>)</span><br><span class="line">    b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​</p>
</li>
<li><p>when表达式</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//when 就是加强版的switch</span></span><br><span class="line">   <span class="keyword">when</span> (x) &#123;</span><br><span class="line">            <span class="number">1</span> -&gt; println(<span class="string">&quot;x == 1&quot;</span>)</span><br><span class="line">            <span class="number">2</span>,<span class="number">3</span> -&gt; println(<span class="string">&quot;x is 2 or 3&quot;</span>)				<span class="comment">//多个分支条件放在一起，用逗号分隔</span></span><br><span class="line">            <span class="keyword">in</span> <span class="number">2</span> .. <span class="number">6</span> -&gt; println(<span class="string">&quot;x in 2..6&quot;</span>)			<span class="comment">//检查一个区间或者集合中</span></span><br><span class="line">            !<span class="keyword">in</span> <span class="number">7</span> until  <span class="number">9</span> -&gt; println(<span class="string">&quot;x not in 7..8&quot;</span>)</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Int</span> -&gt; println(<span class="string">&quot;x is Int type&quot;</span>)			<span class="comment">//检查类型（有智能转换）</span></span><br><span class="line">            parseInt(<span class="string">&quot;888&quot;</span>) -&gt; println(<span class="string">&quot;x == 888&quot;</span>)		<span class="comment">//任意表达式（而不只是常量）作为分支条件</span></span><br><span class="line">            <span class="keyword">else</span> -&gt; &#123;</span><br><span class="line">                println(<span class="string">&quot;x is else&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//when 也可以用来取代 if-else if链。 如果不提供参数，所有的分支条件都是简单的布尔表达式，而当一个分支的条件为真时则执行该分支</span></span><br><span class="line"><span class="keyword">when</span> &#123;</span><br><span class="line">    x.isOdd() -&gt; print(<span class="string">&quot;x is odd&quot;</span>)</span><br><span class="line">    x.isEven() -&gt; print(<span class="string">&quot;x is even&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span> -&gt; print(<span class="string">&quot;x is funny&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//when 既可以被当做语句使用 也可以被当做表达式使用（必须覆盖所有情况，就是要有else）</span></span><br><span class="line">  <span class="keyword">var</span> y = <span class="keyword">when</span> (x) &#123;</span><br><span class="line">            <span class="number">1</span> -&gt; <span class="string">&quot;this is one&quot;</span></span><br><span class="line">            <span class="keyword">else</span> -&gt; <span class="string">&quot;this is other&quot;</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>​</p>
</li>
</ol>
<br>

<h4 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h4><p><em>for</em> 循环可以对任何提供迭代器（iterator）的对象进行遍历，语法如下:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (item <span class="keyword">in</span> collection) print(item)</span><br></pre></td></tr></table></figure>

<p>数组的 <code>for</code> 循环会被编译为并不创建迭代器的基于索引的循环,如果你想要通过索引遍历一个数组或者一个 list，你可以这么做：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> arrayOf(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>)) &#123;</span><br><span class="line">    println(i)	<span class="comment">// a b c</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> arrayOf(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>).indices) &#123;</span><br><span class="line">    println(i)	<span class="comment">// 0 1 2</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> ((i,value) <span class="keyword">in</span> arrayOf(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>).withIndex()) &#123;</span><br><span class="line">    println(<span class="string">&quot;<span class="variable">$i</span> : <span class="variable">$value</span>&quot;</span>) <span class="comment">// 0 : a		1 : b		2 : c</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="类和继承"><a href="#类和继承" class="headerlink" title="类和继承"></a>类和继承</h4><p>Kotlin 中使用关键字 <em>class</em> 声明类，类声明由类名、类头（指定其类型参数、主构造函数等）和由大括号包围的类体构成。类头和类体都是可选的； 如果一个类没有类体，可以省略花括号。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Invoice</span> <span class="keyword">public</span> <span class="keyword">constructor</span></span>()&#123; <span class="comment">//标准</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Empty</span> 	//省略花括号</span></span><br></pre></td></tr></table></figure>

<p>在 Kotlin 中的一个类可以有一个<strong>主构造函数</strong>和一个或多个<strong>次构造函数</strong>。主构造函数是类头的一部分：它跟在类名（和可选的类型参数）后。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">constructor</span></span>(firstName: String) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果主构造函数没有任何注解或者可见性修饰符，可以省略这个 constructor 关键字</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>(firstName: String) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//主构造函数不能包含任何的代码。初始化的代码可以放到以 init 关键字作为前缀的初始化块中</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Customer</span></span>(name: String) &#123;</span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;Customer initialized with value <span class="subst">$&#123;name&#125;</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// constructor 声明次构造函数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(parent: Person) &#123;</span><br><span class="line">        parent.children.add(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//如果类有一个主构造函数，每个次构造函数需要委托给主构造函数， 可以直接委托或者通过别的次构造函数间接委托。</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>(<span class="keyword">val</span> name: String) &#123;</span><br><span class="line">        <span class="keyword">constructor</span>(name: String, parent: Person) : <span class="keyword">this</span>(name)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">constructor</span>(name: String, age: <span class="built_in">Int</span>, parent: Person) : <span class="keyword">this</span>(name, parent)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<br>

<p>要创建一个类的实例，我们就像普通函数一样调用构造函数：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> invoice = Invoice()</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> customer = Customer(<span class="string">&quot;Joe Smith&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>注意 Kotlin 并没有 <em>new</em> 关键字。</p>
<br>

<p>在 Kotlin 中所有类都有一个共同的超类 <code>Any</code>，这对于没有超类型声明的类是默认超类：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> // 从 <span class="title">Any</span> 隐式继承</span></span><br></pre></td></tr></table></figure>

<p><code>Any</code> 不是 <code>java.lang.Object</code>；尤其是，它除了 <code>equals()</code>、<code>hashCode()</code>和<code>toString()</code>外没有任何成员。 </p>
<p>要声明一个显式的超类型，我们把类型放到类头的冒号之后：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">Base</span></span>(p: <span class="built_in">Int</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span></span>(p: <span class="built_in">Int</span>) : Base(p)</span><br></pre></td></tr></table></figure>

<p>如果该类有一个主构造函数，其基类型可以（并且必须） 用（基类型的）主构造函数参数就地初始化，如上面的例子。</p>
<br>

<p>如果一个类 实现两个不同接口，但两接口拥有同名方法时，编译器会要求覆盖同名方法。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">       <span class="keyword">open</span> <span class="function"><span class="keyword">fun</span> <span class="title">f</span><span class="params">()</span></span> &#123;</span><br><span class="line">           print(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">       &#125;</span><br><span class="line">   </span><br><span class="line">       <span class="function"><span class="keyword">fun</span> <span class="title">a</span><span class="params">()</span></span> &#123;</span><br><span class="line">           print(<span class="string">&quot;a&quot;</span>)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="class"><span class="keyword">interface</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">       <span class="function"><span class="keyword">fun</span> <span class="title">f</span><span class="params">()</span></span> &#123;</span><br><span class="line">           print(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">       &#125; <span class="comment">// 接口成员默认就是“open”的</span></span><br><span class="line">   </span><br><span class="line">       <span class="function"><span class="keyword">fun</span> <span class="title">b</span><span class="params">()</span></span> &#123;</span><br><span class="line">           print(<span class="string">&quot;b&quot;</span>)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">C</span></span>() : A(), B &#123;</span><br><span class="line">       <span class="comment">// 编译器要求覆盖 f()：</span></span><br><span class="line">       <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">f</span><span class="params">()</span></span> &#123;</span><br><span class="line">           <span class="keyword">super</span>&lt;A&gt;.f() <span class="comment">// 调用 A.f()</span></span><br><span class="line">           <span class="keyword">super</span>&lt;B&gt;.f() <span class="comment">// 调用 B.f()</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<br>

<p>Kotlin 的细节东西太多，以上都是基础，详情还需查看<a target="_blank" rel="noopener" href="https://kotlinlang.org/">Kotlin官网</a> 或 <a target="_blank" rel="noopener" href="https://www.kotlincn.net/">Kotlin中文网</a>。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/kotlin/" rel="tag"># kotlin</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/05/24/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/" rel="prev" title="科学上网">
      <i class="fa fa-chevron-left"></i> 科学上网
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/06/24/Android-%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7/" rel="next" title="Android 抓包工具">
      Android 抓包工具 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">2.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E6%80%A7"><span class="nav-number">3.</span> <span class="nav-text">特性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E8%AF%AD%E6%B3%95%E7%AE%80%E5%8D%95%EF%BC%8C%E4%B8%8D%E5%95%B0%E5%97%A6"><span class="nav-number">3.1.</span> <span class="nav-text">1. 语法简单，不啰嗦</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E7%A9%BA%E6%8C%87%E9%92%88%E5%AE%89%E5%85%A8"><span class="nav-number">3.2.</span> <span class="nav-text">2. 空指针安全</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E6%94%AF%E6%8C%81%E6%96%B9%E6%B3%95%E6%89%A9%E5%B1%95"><span class="nav-number">3.3.</span> <span class="nav-text">3. 支持方法扩展</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Lambda-%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%EF%BC%8CStreams-API-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%94%AF%E6%8C%81"><span class="nav-number">3.4.</span> <span class="nav-text">4. Lambda, 高阶函数，Streams API, 函数式编程支持</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E6%9D%BF"><span class="nav-number">3.5.</span> <span class="nav-text">5. 字符串模板</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">4.</span> <span class="nav-text">基本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.1.</span> <span class="nav-text">声明类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">4.2.</span> <span class="nav-text">函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%BA%E9%97%B4"><span class="nav-number">4.3.</span> <span class="nav-text">区间</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9B%86%E5%90%88"><span class="nav-number">4.4.</span> <span class="nav-text">集合</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="nav-number">4.5.</span> <span class="nav-text">条件语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF"><span class="nav-number">4.6.</span> <span class="nav-text">循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%92%8C%E7%BB%A7%E6%89%BF"><span class="nav-number">4.7.</span> <span class="nav-text">类和继承</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Deemons"
      src="/img/my_icon.jpeg">
  <p class="site-author-name" itemprop="name">Deemons</p>
  <div class="site-description" itemprop="description">不积小流，无以成江海。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">55</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">89</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备19061230号 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Deemons</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
